<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>code-server on ymt2log</title><link>/tags/code-server/</link><description>Recent content in code-server on ymt2log</description><generator>Hugo -- gohugo.io</generator><language>ja-JP</language><lastBuildDate>Sun, 09 Jan 2022 23:29:00 +0900</lastBuildDate><atom:link href="/tags/code-server/index.xml" rel="self" type="application/rss+xml"/><item><title>code-server</title><link>/posts/code-server/</link><pubDate>Sun, 09 Jan 2022 23:29:00 +0900</pubDate><guid>/posts/code-server/</guid><description>最近はブラウザでコードを書くのが流行っていそうなので、自宅マシン上の coder/code-server をどこにいても利用できるようにしてみた。
所有している端末のどれでも、どこからでも接続したいが安心は欲しいので VPN 経由でのみ接続できるようにしている。
VPN の構成には Tailscale を利用している。 自前で構築してもよかったが、住んでいるマンションのインフラ都合上、手元の ルータにグローバル IP アドレスが降ってこないので面倒くさそうでやめた。
以下のような構成を目指す。 code-server の構成 インストール自体は簡単。
$ paru -S code-server $ systemctl enable code-server@$USER 大事なことはリバースプロキシに任せるので設定も適当。
bind-addr: 127.0.0.1:8080 auth: none cert: false Tailscale の構成 code-server は非 SSL アクセスな場合にその機能を制限してしまう。
Tailscale には内部のアクセスのための SSL 証明書を発行する仕組みが 備わっているので、それを活用して code-server の制限を回避する。 https://tailscale.com/blog/tls-certs/
手順は Enabling HTTPS - Tailscale にある。 完了すると /var/lib/tailscale/certs あたりに必要なファイルが揃っているはず。
nginx の構成 $ paru -S nginx-mainline $ systemctl enable nginx.service virtual servers を管理しやすくする設定。
http { .</description></item></channel></rss>